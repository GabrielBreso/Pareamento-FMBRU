<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pareamento dos bixos</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            background-color: #f0f0f0;
        }
        .container {
            text-align: center;
            padding: 20px;
            background-color: #fff;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }
        .input-file {
            margin: 10px 0;
        }
        .output {
            margin-top: 20px;
            white-space: pre-wrap; /* Preserva os espaços em branco e quebras de linha */
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Pareamento dos bixos</h1>
        <input class="input-file" type="file" id="fileInput1" accept=".csv">
        <input class="input-file" type="file" id="fileInput2" accept=".csv">
        <button id="parearButton">Parear</button>
        <div class="output" id="output"></div>
    </div>

    <script>
        document.getElementById('parearButton').addEventListener('click', () => {
            const fileInput1 = document.getElementById('fileInput1').files[0];
            const fileInput2 = document.getElementById('fileInput2').files[0];

            if (fileInput1 && fileInput2) {
                const reader1 = new FileReader();
                const reader2 = new FileReader();

                reader1.onload = (e) => {
                    const content1 = e.target.result;
                    processCSV(content1, 'File 1');
                };

                reader2.onload = (e) => {
                    const content2 = e.target.result;
                    processCSV(content2, 'File 2');
                };

                reader1.readAsText(fileInput1);
                reader2.readAsText(fileInput2);
            } else {
                alert('Por favor, selecione ambos os arquivos.');
            }
        });

        function processCSV(content, fileName) {
            const rows = content.split('\n');
            const data = rows.map(row => row.split(','));
            console.log(`Conteúdo de ${fileName}:`, data);
            return data;
        }

        function calculateEuclideanDistance(data1, data2) {
            const distances = [];

            data1.forEach((row1, index1) => {
                const name1 = row1[0];
                const values1 = row1.slice(1).map(Number);

                data2.forEach((row2, index2) => {
                    const name2 = row2[0];
                    const values2 = row2.slice(1).map(Number);

                    if (name1 === name2) {
                        const distance = Math.sqrt(values1.reduce((sum, val, i) => sum + Math.pow(val - values2[i], 2), 0));
                        distances.push({ name: name1, distance: distance });
                    }
                });
            });

            return distances;
        }

        function displayContent(data1, data2) {
            const outputDiv = document.getElementById('output');
            const distances = calculateEuclideanDistance(data1, data2);
            let content = '<h3>Distâncias Euclidianas:</h3><ul>';

            distances.forEach(item => {
                content += `<li>${item.name}: ${item.distance.toFixed(2)}</li>`;
            });

            content += '</ul>';
            outputDiv.innerHTML = content;
        }
    </script>
</body>
</html>
